# 📈 자동 그리드 트레이딩 봇 (Auto Grid Trading Bot)

이 프로젝트는 그리드 트레이딩 전략을 기반으로 하는 고급 암호화폐 자동거래 봇입니다. 사용자 친화적인 GUI를 통해 실시간 모니터링 및 설정을 제공하며, 다양한 시장 상황에 대응할 수 있는 고급 기능을 포함하고 있습니다.

## ✨ 주요 기능

### 🎯 핵심 거래 전략
- **고급 그리드 트레이딩**: 상한선/하한선을 설정하여 가격 범위에 따른 그리드 개수를 자동으로 계산
- **추세 추종 매수 로직**: 그리드 도달 시 바로 매수하지 않고 하락 추세 확인 후 반등 시점에서 매수
- **추세 추종 매도 로직**: 그리드 도달 시 바로 매도하지 않고 상승 추세 확인 후 하락 시점에서 매도
- **0.1% 확인 버퍼**: 추세 변화를 확인하기 위한 정밀한 버퍼 시스템

### 🤖 자동 거래 시스템
- **4가지 리스크 모드**: 
  - 🛡️ **보수적**: 안전 우선, 낮은 위험
  - ⚖️ **안정적**: 균형잡힌 접근
  - 🔥 **공격적**: 적극적 수익 추구
  - ⚡ **극공격적**: 최대 수익 모드
- **자동 최적화**: 거래 성과 분석 후 1시간마다 파라미터 자동 조정
- **실적 기반 리스크 조정**: 승률과 수익률을 분석하여 리스크 모드 자동 변경

### 📊 실시간 차트 및 UI
- **인터랙티브 차트**: 실시간 가격, 거래량, 기술지표 차트
- **차트 조작 기능**:
  - 🖱️ **마우스 드래그**: 좌클릭 + 드래그로 차트 이동
  - 🎯 **마우스 휠**: 포인터 중심 확대/축소
  - ⌨️ **키보드 단축키**:
    - `+`/`=`: 확대 | `-`: 축소 | `R`: 리셋
    - `←→↑↓`: 방향키로 차트 이동
- **네비게이션 툴바**: matplotlib 표준 도구 제공
- **실시간 호버 정보**: 차트 위 마우스 오버 시 상세 정보 표시

### 📈 거래 상태 모니터링
- **코인별 현재 상태**: 매수/매도 시점 찾는 중, 대기 중 등 4가지 상태 표시
- **거래 횟수 추적**: 매수/매도 횟수 및 수익 거래 횟수 실시간 업데이트
- **수익률 분석**: 평가수익, 실현수익, 총 수익률 실시간 계산
- **TTS 음성 안내**: 한국어 코인명 (비트코인, 이더리움, 리플)으로 거래 상황 음성 안내

### 🔧 고급 관리 기능
- **거래 재개**: 중단 후 재시작 시 JSON 데이터 기반으로 이어서 거래
- **데이터 초기화**: 모든 거래 데이터 및 상태를 한번에 리셋
- **거래 로그 팝업**: 별도 창으로 실시간 거래 로그 확인
- **엑셀 내보내기**: 거래 데이터를 Excel 파일로 내보내기

## 🎮 사용법

### 기본 거래 시작
1. **코인 선택**: BTC, ETH, XRP 중 선택
2. **총 투자금 설정**: 운용할 총 자금 입력
3. **자동모드 ON**: 리스크 모드 선택 (보수적/안정적/공격적/극공격적)
4. **거래 시작 버튼** 클릭

### 차트 조작 방법
- **이동**: 마우스 좌클릭 + 드래그 또는 방향키 (←→↑↓)
- **확대/축소**: 마우스 휠 또는 키보드 (+/-, R)
- **도구 사용**: 상단 네비게이션 툴바 활용

### 고급 설정
- **고급설정**: 세부 파라미터 조정
- **거래로그**: 팝업창으로 상세 로그 확인
- **데이터초기화**: 모든 거래 데이터 리셋

## 🚀 설치 및 실행

### 사전 준비
1. **Python 3.8+** 설치
2. **Upbit API 키** 발급 (조회 + 주문 권한만)
3. **카카오톡 알림** 설정 (선택사항)

### 설치

#### 🔧 자동 설치 (권장)
```bash
# 프로젝트 클론
git clone [repository_url]
cd Auto-Trading

# 자동 설치 스크립트 실행
# macOS/Linux
./install.sh

# Windows
install.bat
```

#### 🔧 수동 설치
```bash
# 프로젝트 클론
git clone [repository_url]
cd Auto-Trading

# 가상환경 설정
python3 -m venv venv
source venv/bin/activate  # macOS/Linux
# venv\Scripts\activate   # Windows

# 라이브러리 설치
pip install -r requirements.txt
```

### 설정 파일 (config.json)
```json
{
    "upbit_access": "YOUR_UPBIT_ACCESS_KEY",
    "upbit_secret": "YOUR_UPBIT_SECRET_KEY",
    "kakao_token": "YOUR_KAKAO_TOKEN",
    "total_investment": "100000000",
    "demo_mode": 1,
    "auto_trading_mode": true,
    "risk_mode": "보수적",
    "auto_update_interval": 60,
    "tts_enabled": true,
    "kakao_enabled": true,
    "advanced_grid_trading": true,
    "grid_confirmation_buffer": 0.1,
    "fee_rate": 0.0005
}
```

### 실행
```bash
python main.py
```

## 🧠 트레이딩 로직

### 그리드 트레이딩 전략
1. **가격 범위 설정**: 선택된 기간의 최고/최저가 기준으로 그리드 범위 설정
2. **그리드 개수 계산**: 투자금과 수수료를 고려한 최적 그리드 개수 자동 계산
3. **매수 조건**: 
   - 그리드 가격 도달 → 0.1% 하락 확인 → 반등 시 매수 실행
   - 하락 추세에서 상승 추세 전환점 포착
4. **매도 조건**:
   - 그리드 가격 도달 → 0.1% 상승 확인 → 하락 시 매도 실행  
   - 상승 추세에서 하락 추세 전환점 포착

### 리스크 관리
- **보수적**: 그리드 개수 15개 제한, 투자비율 30%
- **안정적**: 그리드 개수 20개 제한, 투자비율 50%  
- **공격적**: 그리드 개수 25개 제한, 투자비율 70%
- **극공격적**: 그리드 개수 30개 제한, 투자비율 90%

### 자동 최적화 
- **승률 분석**: 매시간 거래 성과 분석
- **파라미터 조정**: 성과에 따른 그리드 간격, 투자비율 자동 조정
- **리스크 모드 변경**: 연속 손실 시 보수적 모드로, 연속 수익 시 공격적 모드로 자동 전환

## 📁 데이터 파일

- **config.json**: 봇 설정 및 API 키
- **trading_state_[COIN].json**: 코인별 거래 상태 및 포지션
- **trade_logs.json**: 모든 거래 로그 기록
- **trade_counts.json**: 거래 횟수 및 수익 거래 통계

## ⚠️ 주의사항

- **데모 모드**: 실제 거래 전 반드시 데모 모드에서 충분히 테스트
- **API 키 관리**: 민감한 정보 노출 방지
- **리스크 관리**: 투자 손실 위험 항상 존재
- **네트워크**: 안정적인 인터넷 연결 필요
- **모니터링**: 정기적인 봇 상태 확인 권장

## 🛠️ 문제 해결

### 차트 조작이 안될 때
- 차트 영역 클릭 후 키보드/마우스 조작 시도
- 캔버스에 포커스가 있는지 확인

### 거래가 실행되지 않을 때
- API 키 유효성 확인
- 잔고 및 최소 거래 단위 확인
- 네트워크 연결 상태 점검

### 카카오톡 알림 오류
- 카카오 개발자 센터에서 새 토큰 발급
- config.json의 kakao_token 값 업데이트

## 📊 성과 지표

- **실시간 수익률**: 평가수익 + 실현수익 기반 계산
- **거래 성공률**: 수익 거래 / 전체 거래 비율
- **코인별 분석**: 각 코인의 개별 성과 추적
- **시간대별 분석**: 거래 시간 패턴 분석 가능

## 🔄 시스템 요구사항

### 최소 요구사항
- **OS**: Windows 10+, macOS 10.14+, Ubuntu 18.04+
- **Python**: 3.8 이상
- **RAM**: 최소 4GB (권장 8GB+)
- **네트워크**: 안정적인 인터넷 연결 (API 호출용)
- **디스플레이**: 1920x1080 해상도 권장

### 권장 환경
- **CPU**: 멀티코어 프로세서 (실시간 처리용)
- **RAM**: 8GB 이상
- **SSD**: 빠른 파일 I/O를 위해 권장
- **모니터**: 듀얼 모니터 (차트 모니터링에 유용)

## 📈 백테스팅 기능

내장된 백테스팅 도구를 사용하여 전략 성과를 미리 확인할 수 있습니다:

1. **📊 백테스트 버튼** 클릭
2. **테스트 기간** 선택 (1일, 7일, 30일)
3. **그리드 설정** 확인
4. **시뮬레이션 실행**
5. **결과 분석**: 수익률, 최대 손실, 거래 횟수 등

## 🎨 GUI 구성 요소

### 메인 화면
- **상단**: 코인 선택, 자동모드 토글, 거래 시작/중지 버튼
- **중앙**: 실시간 인터랙티브 차트 (가격, 거래량, 그리드)
- **우측**: 코인별 현황, 수익률, 거래 통계
- **하단**: 그리드 투자 설정 패널

### 설정 창
- **기본 설정**: 투자금, 그리드 개수, 기간
- **고급 설정**: 리스크 모드, 버퍼 비율, 수수료율
- **알림 설정**: TTS, 카카오톡 알림 on/off
- **API 설정**: Upbit, 카카오 토큰

## 🚦 거래 상태 코드

| 상태 | 설명 | 색상 표시 |
|------|------|-----------|
| 🟢 **대기중** | 그리드 범위 내 대기 | 녹색 |
| 🔵 **매수 시점 탐색** | 하락 추세 확인 중 | 파란색 |
| 🟠 **매도 시점 탐색** | 상승 추세 확인 중 | 주황색 |
| 🟡 **보류 중** | 추세 전환 대기 | 노란색 |

## 📱 알림 시스템

### TTS 음성 알림
- **거래 실행**: "비트코인 매수 완료" 등 실시간 음성 안내
- **상태 변화**: "리스크 모드 변경됨" 등 시스템 알림
- **오류 발생**: "API 오류 발생" 등 문제 상황 알림

### 카카오톡 알림
- **주요 거래**: 큰 금액의 매수/매도 시
- **수익/손실**: 일정 수준 이상의 수익률 달성 시
- **시스템 오류**: 심각한 오류 발생 시

## 🔧 고급 설정 가이드

### 리스크 모드별 세부 설정

#### 🛡️ 보수적 모드
```json
{
    "max_grids": 15,
    "investment_ratio": 0.3,
    "confirmation_buffer": 0.15,
    "stop_loss": -3.0
}
```

#### ⚡ 극공격적 모드
```json
{
    "max_grids": 30,
    "investment_ratio": 0.9,
    "confirmation_buffer": 0.05,
    "stop_loss": -10.0
}
```

### 사용자 정의 그리드 설정
1. **수동 범위 설정**: 상한선/하한선 직접 입력
2. **동적 범위 계산**: 변동성 기반 자동 조정
3. **그리드 간격 조정**: 균등/로그/피보나치 간격

## 🎯 투자 전략 팁

### 초보자용
1. **데모 모드**에서 최소 1주일 테스트
2. **보수적 모드**로 시작
3. **소액 투자**로 경험 축적
4. **단일 코인**으로 시작하여 점진적 확장

### 고급 사용자용
1. **백테스팅**으로 최적 파라미터 탐색
2. **다중 코인** 포트폴리오 운용
3. **실시간 모니터링**으로 수동 개입
4. **시장 상황별** 리스크 모드 조정

## 🔍 모니터링 체크리스트

### 일일 점검 사항
- [ ] 봇 정상 작동 여부
- [ ] API 연결 상태
- [ ] 잔고 및 포지션 확인
- [ ] 당일 거래 성과 검토

### 주간 점검 사항
- [ ] 총 수익률 분석
- [ ] 거래 패턴 검토
- [ ] 리스크 모드 적정성 평가
- [ ] 설정 파라미터 최적화

## 🆘 비상 상황 대응

### 급작스런 시장 변동 시
1. **수동 거래 중단**: 거래 중지 버튼 클릭
2. **포지션 확인**: 현재 보유량과 평가손익 점검
3. **수동 청산**: 필요시 거래소에서 직접 매도
4. **설정 재조정**: 시장 상황에 맞게 파라미터 변경

### 시스템 오류 발생 시
1. **로그 확인**: 거래 로그에서 오류 내용 파악
2. **API 키 점검**: 만료되거나 권한 문제 확인
3. **네트워크 확인**: 인터넷 연결 상태 점검
4. **재시작**: 프로그램 완전 종료 후 재실행

---

## 📚 추가 자료

- **Upbit API 문서**: [https://docs.upbit.com/](https://docs.upbit.com/)
- **Python 그리드 트레이딩 가이드**: 각종 온라인 튜토리얼
- **기술적 분석 기초**: 차트 패턴 및 지표 학습 권장

---

> ⚡ **면책조항**: 이 소프트웨어는 교육 및 연구 목적으로 제작되었습니다. 실제 투자 시 발생하는 모든 손실에 대한 책임은 사용자에게 있습니다.
> 
> 🔒 **보안 주의**: API 키는 절대 타인과 공유하지 마시고, 정기적으로 갱신하시기 바랍니다.