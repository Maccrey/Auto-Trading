# 📈 자동 그리드 트레이딩 봇 v4.2.4

[![Version](https://img.shields.io/badge/Version-4.2.4-blue.svg)](https://github.com/your-repo/auto-trading-bot)
[![Python](https://img.shields.io/badge/Python-3.8+-green.svg)](https://python.org)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)
[![Last Update](https://img.shields.io/badge/Last%20Update-2025--12--01-red.svg)](#)

> 🤖 **AI 기반 지능형 암호화폐 그리드 트레이딩 봇**  
> Upbit 거래소에서 BTC, ETH, XRP의 고급 그리드 트레이딩을 지원합니다.

## 🚀 주요 특징

### ✨ **v4.2.4 핵심 기능**

🧠 **AI 기반 지능형 자산 배분**
- 가격 흐름, 거래량, 변동성, 실현수익률 종합 분석
- 실시간 자동 리밸런싱 (1시간 간격)
- 실현수익 자동 재투자로 복리 효과 극대화

⚡ **고급 그리드 트레이딩 시스템**
- 추세 확인 후 매수/매도 (0.1% 확인 버퍼)
- 코인별 맞춤 그리드 설정
- 실시간 차트 마커 및 거래 현황 표시
- **🔄 동적 그리드 재설정**: 가격 이탈시 자동 그리드 범위 재조정

🛡️ **스마트 리스크 관리**
- 4단계 리스크 모드 (보수적/안정적/공격적/극공격적)
- 포트폴리오 손절 및 트레일링 스톱
- TTS 음성 알림 및 로그 시스템

## 🔄 v4.2.4 업데이트 내역

### 🚀 **혁신적 기능 추가**
- ✨ **동적 그리드 재설정 시스템**: 가격 범위 이탈 시 자동 그리드 재조정으로 투자 중단 방지
  - 실시간 그리드 범위 이탈 감지 (상단/하단 5% 기준)
  - 이탈 방향에 따른 지능형 비대칭 범위 설정
  - 시간당 최대 12회 재설정 제한으로 과도한 조정 방지
  - 5분 최소 간격으로 안정성 확보

### 🔧 **시스템 개선**
- ⚙️ **설정 기반 제어**: config.json에서 동적 재설정 기능 완전 제어 가능
- 🛡️ **안전 장치 강화**: 3% 미만 이탈은 무시하여 일시적 변동 대응
- 📊 **실시간 알림**: 중요한 그리드 재설정시 TTS 및 카카오톡 알림
- 🧪 **테스트 함수**: 그리드 재설정 로직 검증용 테스트 함수 내장

### 📈 **투자 연속성 향상**  
- 🔄 **무중단 거래**: 급변하는 시장에서도 그리드 범위 자동 조정으로 투자 지속
- 🎯 **적응형 범위 설정**: 상승/하락 트렌드에 맞춘 최적 그리드 범위 계산
- 💪 **거래 기회 극대화**: 기존 그리드 이탈로 놓치던 거래 기회 완전 해결

## ⚙️ 설치 및 실행

### 📋 **사전 준비**
1. **Python 3.8+** 설치
2. **Upbit API 키** 발급 (조회 + 주문 권한)

### 🔧 **설치 방법**

#### 자동 설치 (권장)
```bash
git clone [repository_url]
cd Auto-Trading

# macOS/Linux
./install.sh

# Windows
install.bat
```

#### 수동 설치
```bash
git clone [repository_url]
cd Auto-Trading

python3 -m venv venv
source venv/bin/activate  # macOS/Linux
pip install -r requirements.txt
```

### ▶️ **실행**
```bash
source venv/bin/activate  # 가상환경 활성화
python main.py
```

## 🎮 사용 방법

### 1️⃣ **기본 설정**
1. **API 키 설정**: config.json에 Upbit API 키 입력
2. **거래 모드 선택**: 데모 모드 / 실거래 모드
3. **총 투자금 설정**: 투자할 금액 입력
4. **코인 선택**: BTC, ETH, XRP 중 선택

### 2️⃣ **자동 거래 시작**
1. **자동모드 활성화**: 🤖 자동모드 버튼 클릭
2. **리스크 모드 선택**: 보수적 → 극공격적 중 선택
3. **거래 시작**: 거래시작 버튼 클릭
4. **실시간 모니터링**: 차트와 로그로 거래 상황 확인

### 3️⃣ **고급 기능**
- **⚡ 수동 최적화**: 언제든지 복리 재배분 실행
- **📊 거래 로그**: 실시간 거래 내역 팝업
- **🔄 로그 복구**: 백업에서 거래 데이터 복원
- **📄 엑셀 내보내기**: 거래 데이터 Excel 파일로 저장
- **🔄 동적 그리드**: 가격 이탈시 자동 그리드 범위 재조정으로 무중단 투자

## 📊 리스크 모드

| 모드 | 그리드 수 | 투자 비율 | 손절 기준 | 특징 |
|------|-----------|-----------|-----------|------|
| 🛡️ **보수적** | 15개 | 30% | -5% | 안정적, 낮은 위험 |
| ⚖️ **안정적** | 20개 | 50% | -8% | 균형적 접근 |
| 🔥 **공격적** | 25개 | 70% | -12% | 높은 수익 추구 |
| ⚡ **극공격적** | 30개 | 90% | -15% | 최고 수익, 고위험 |

## 🛡️ 안전 기능

### 🔐 **데이터 보호**
- **자동 백업**: 매일 새벽 2시 거래 데이터 백업
- **2단계 확인**: 데이터 삭제 시 중복 확인
- **설정 보존**: 데이터 초기화 시 설정은 보존

### ⚠️ **리스크 관리**
- **손절선**: 설정된 손실률 도달 시 자동 매도
- **트레일링 스톱**: 최고점에서 일정% 하락 시 수익 실현
- **포트폴리오 손절**: 전체 손실이 임계치 초과 시 전량 매도

## 📁 프로젝트 구조

```
Auto-Trading/
├── main.py              # 메인 프로그램
├── config.json          # 봇 설정 및 API 키
├── requirements.txt     # Python 라이브러리 목록
├── install.sh           # 자동 설치 스크립트 (macOS/Linux)
├── install.bat          # 자동 설치 스크립트 (Windows)
├── CLAUDE.md           # 개발 가이드
└── data/               # 데이터 폴더
    ├── trading_state.json   # 거래 상태
    ├── trade_logs.json     # 거래 로그
    ├── profits.json        # 수익 데이터
    └── backup/            # 백업 폴더
        ├── daily/         # 일일 백업
        └── corrupted/     # 손상 파일 백업
```

## ⚙️ 설정 파일 (config.json)

```json
{
    "upbit_access": "YOUR_UPBIT_ACCESS_KEY",
    "upbit_secret": "YOUR_UPBIT_SECRET_KEY", 
    "total_investment": "1000000",
    "demo_mode": 1,
    "auto_trading_mode": true,
    "risk_mode": "보수적",
    "tts_enabled": true,
    "advanced_grid_trading": true,
    "grid_confirmation_buffer": 0.1,
    "fee_rate": 0.0005,
    
    "enable_dynamic_grid_reset": true,
    "grid_breach_threshold": 5.0,
    "min_breach_percent": 3.0,
    "max_grid_resets_per_hour": 12,
    "grid_reset_min_interval": 300
}
```

## 🚨 주의사항

### ⚠️ **투자 위험성**
- 암호화폐 투자는 높은 위험을 수반합니다
- 투자 손실에 대한 모든 책임은 사용자에게 있습니다
- 반드시 데모 모드에서 충분히 테스트 후 실거래하세요

### 🔐 **보안 주의사항**
- API 키는 절대 타인과 공유하지 마세요
- API 키는 조회 + 거래 권한만 부여하세요
- 정기적으로 API 키를 갱신하세요

## 🛠️ 문제 해결

### 자주 발생하는 문제

**Q: 거래가 실행되지 않아요**
- API 키 유효성 확인
- 잔고 및 최소 거래 단위 확인
- 네트워크 연결 상태 점검

**Q: 차트가 업데이트되지 않아요**
- 차트 영역 클릭 후 새로고침
- 프로그램 재시작

**Q: TTS 알림이 들리지 않아요**
- 시스템 음량 확인
- config.json에서 tts_enabled 설정 확인

## 📈 성과 지표

- **실시간 수익률**: 평가수익 + 실현수익
- **거래 성공률**: 수익 거래 / 전체 거래
- **코인별 분석**: 각 코인의 개별 성과
- **배분된 총자산**: AI 기반 최적 투자금 분배 현황

## 🔧 시스템 요구사항

### 최소 요구사항
- **OS**: Windows 10+, macOS 10.14+, Ubuntu 18.04+
- **Python**: 3.8 이상
- **RAM**: 4GB 이상
- **네트워크**: 안정적인 인터넷 연결

### 권장 환경
- **RAM**: 8GB 이상
- **CPU**: 멀티코어 프로세서
- **디스플레이**: 1920x1080 이상
- **모니터**: 듀얼 모니터 (모니터링에 유용)

## 📚 추가 자료

- **Upbit API 문서**: [https://docs.upbit.com/](https://docs.upbit.com/)
- **Python 그리드 트레이딩 가이드**: 다양한 온라인 튜토리얼
- **기술적 분석 기초**: 차트 패턴 및 지표 학습

---

## 📊 업데이트 히스토리

### v4.2.4 (2025-12-01) 🚀
- **동적 그리드 재설정 시스템** - 혁신적 투자 연속성 보장
- 그리드 범위 이탈 실시간 감지 및 자동 재조정
- 비대칭 적응형 범위 계산 알고리즘 구현
- 과도한 재설정 방지를 위한 다층 안전 장치

### v4.2.3 (2025-12-01)
- 수동 최적화 로깅 시스템 추가
- 배분된 총자산 실시간 업데이트 개선
- TTS 알림 시스템 최적화 (매수/매도만 알림)
- 데이터 초기화 기능 강화 (백업 포함)

### v4.2.2
- 복리 재배분 시스템 구현
- GUI 업데이트 안정성 향상

### v4.2.1
- AI 기반 지능형 자산 배분 시스템
- 실시간 리밸런싱 기능

---

> **⚡ 면책조항**: 이 소프트웨어는 교육 및 연구 목적으로 제작되었습니다. 실제 투자로 인한 손실에 대해서는 사용자가 모든 책임을 집니다.
> 
> **🔒 보안**: API 키 보안에 각별히 주의하시고, 정기적으로 갱신하시기 바랍니다.